<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>FUTURA PNRR ¬∑ Dashboard 2025/26 ¬∑ IIS Mendel</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Nunito:wght@300;400;600;700;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>

<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#060D1A;--bg2:#0C1A30;--bg3:#0F2040;--panel:#0A1628;
  --border:rgba(0,200,255,.13);
  --cyan:#00E5FF;--cyan2:#00B4D8;--gold:#FFD166;
  --verde:#06D6A0;--verde2:#00A67E;--rosso:#EF476F;--lilla:#9B72CF;
  --testo:#C8D8F0;--testo2:rgba(200,216,240,.55);
  --glow-c:rgba(0,229,255,.18);--glow-g:rgba(6,214,160,.18);--glow-gold:rgba(255,209,102,.15);
}
html{scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:var(--bg3) var(--bg)}
body{font-family:'Nunito',sans-serif;background:var(--bg);color:var(--testo);overflow-x:hidden}
#particles{position:fixed;inset:0;z-index:0;pointer-events:none;opacity:.35}

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
header{position:relative;min-height:420px;display:flex;flex-direction:column;justify-content:flex-end;z-index:2;overflow:hidden;border-bottom:1px solid var(--border)}
.hero-grid{position:absolute;inset:0;background-image:linear-gradient(var(--border) 1px,transparent 1px),linear-gradient(90deg,var(--border) 1px,transparent 1px);background-size:48px 48px;mask-image:radial-gradient(ellipse 80% 100% at 50% 0%,black 40%,transparent 100%)}
.hero-glow{position:absolute;width:700px;height:400px;top:-100px;left:50%;transform:translateX(-50%);background:radial-gradient(ellipse,rgba(0,229,255,.12) 0%,transparent 70%);pointer-events:none}
.hero-inner{position:relative;z-index:2;padding:60px 60px 48px;max-width:1280px;margin:0 auto;width:100%}
.hero-tag{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--cyan);color:var(--cyan);font-family:'JetBrains Mono',monospace;font-size:.7rem;letter-spacing:.18em;padding:5px 14px;border-radius:2px;margin-bottom:22px;animation:fadeIn .8s ease both}
.pulse{width:7px;height:7px;border-radius:50%;background:var(--cyan);animation:pulseDot 1.5s ease infinite}
@keyframes pulseDot{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.7)}}
header h1{font-family:'Bebas Neue',sans-serif;font-size:clamp(2.8rem,6vw,5.2rem);letter-spacing:.04em;line-height:1;color:#fff;animation:slideUp .8s ease .1s both}
header h1 .ac1{color:var(--cyan)} header h1 .ac2{color:var(--gold)}
.hero-sub{margin-top:16px;font-size:1rem;color:var(--testo2);letter-spacing:.03em;animation:slideUp .8s ease .2s both}
.hero-stats-row{margin-top:32px;display:flex;gap:40px;flex-wrap:wrap;animation:fadeIn .8s ease .4s both}
.h-stat{display:flex;flex-direction:column;gap:2px}
.h-stat-val{font-family:'Bebas Neue',monospace;font-size:2.4rem;color:#fff;line-height:1}
.h-stat-val .u{font-size:1.2rem;color:var(--cyan)}
.h-stat-lbl{font-size:.72rem;color:var(--testo2);letter-spacing:.1em;text-transform:uppercase}
.h-div{width:1px;background:var(--border);align-self:stretch}
.hero-bottom{position:relative;z-index:2;background:rgba(0,20,50,.6);backdrop-filter:blur(8px);border-top:1px solid var(--border);padding:13px 60px;display:flex;align-items:center;gap:24px;font-family:'JetBrains Mono',monospace;font-size:.72rem;color:var(--testo2);animation:fadeIn .6s ease .5s both}
.hero-bottom .sep{color:rgba(0,229,255,.3)}
@keyframes slideUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

/* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
.page{max-width:1280px;margin:0 auto;padding:60px 32px 100px;position:relative;z-index:2}
.sec{margin-bottom:52px}
.sec-hd{display:flex;align-items:center;gap:16px;margin-bottom:32px}
.sec-num{font-family:'JetBrains Mono',monospace;font-size:.7rem;color:var(--cyan);letter-spacing:.2em;padding:3px 10px;border:1px solid rgba(0,229,255,.3);border-radius:2px}
.sec-title{font-family:'Bebas Neue',sans-serif;font-size:1.8rem;letter-spacing:.06em;color:#fff}
.sec-line{flex:1;height:1px;background:linear-gradient(90deg,var(--border) 0%,transparent 100%)}

/* ‚îÄ‚îÄ KPI ‚îÄ‚îÄ */
.kpi-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:48px}
.kpi{background:var(--panel);border:1px solid var(--border);border-radius:4px;padding:28px 24px 24px;position:relative;overflow:hidden;opacity:0;transform:translateY(24px);transition:opacity .5s ease,transform .5s ease,box-shadow .3s}
.kpi.vis{opacity:1;transform:translateY(0)}
.kpi:hover{box-shadow:0 0 32px var(--glow-c)}
.kpi::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--cyan),transparent)}
.kpi.gold::before{background:linear-gradient(90deg,var(--gold),transparent)} .kpi.gold:hover{box-shadow:0 0 32px var(--glow-gold)}
.kpi.verde::before{background:linear-gradient(90deg,var(--verde),transparent)} .kpi.verde:hover{box-shadow:0 0 32px var(--glow-g)}
.kpi.rosso::before{background:linear-gradient(90deg,var(--rosso),transparent)}
.kpi-ico{font-size:1.4rem;margin-bottom:12px;opacity:.7}
.kpi-val{font-family:'Bebas Neue',sans-serif;font-size:3.2rem;line-height:1;color:#fff}
.kpi-val .u{font-size:1.4rem;color:var(--cyan)} .kpi.gold .kpi-val .u{color:var(--gold)} .kpi.verde .kpi-val .u{color:var(--verde)}
.kpi-lbl{margin-top:6px;font-size:.72rem;font-weight:700;letter-spacing:.12em;text-transform:uppercase;color:var(--testo2)}
.kpi-note{margin-top:4px;font-size:.72rem;color:rgba(200,216,240,.35)}

/* ‚îÄ‚îÄ CARD ‚îÄ‚îÄ */
.card{background:var(--panel);border:1px solid var(--border);border-radius:4px;padding:28px;opacity:0;transform:translateY(20px);transition:opacity .5s ease,transform .5s ease;position:relative;overflow:hidden}
.card.vis{opacity:1;transform:translateY(0)}
.card::after{content:'';position:absolute;bottom:0;right:0;width:160px;height:160px;background:radial-gradient(circle,var(--glow-c),transparent 70%);pointer-events:none;opacity:.4}
.card-ttl{font-size:.72rem;font-weight:700;letter-spacing:.14em;text-transform:uppercase;color:var(--cyan);margin-bottom:4px}
.card-sub{font-size:.78rem;color:var(--testo2);margin-bottom:20px}
.g2{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}
.g13{display:grid;grid-template-columns:1fr 3fr;gap:20px;margin-bottom:20px}
.ch{width:100%}

/* ‚îÄ‚îÄ GAUGE ‚îÄ‚îÄ */
.gauge-wrap{display:flex;flex-direction:column;align-items:center;gap:16px;padding:8px 0 16px}
.gauge-ring{position:relative;width:180px;height:180px}
.gauge-ring svg{transform:rotate(-90deg)}
.gauge-ring .track{fill:none;stroke:var(--bg3);stroke-width:14}
.gauge-ring .fill{fill:none;stroke-width:14;stroke-linecap:round;stroke-dasharray:502;stroke-dashoffset:502;transition:stroke-dashoffset 1.6s cubic-bezier(.4,0,.2,1)}
.gauge-label{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}
.gauge-big{font-family:'Bebas Neue',sans-serif;font-size:2.4rem;color:#fff;line-height:1}
.gauge-sm{font-size:.68rem;letter-spacing:.1em;text-transform:uppercase;color:var(--testo2)}

/* ‚îÄ‚îÄ PROGRESS BARS ‚îÄ‚îÄ */
.pb-item{display:flex;flex-direction:column;gap:5px;margin-bottom:14px}
.pb-header{display:flex;justify-content:space-between;align-items:baseline}
.pb-name{font-size:.8rem;font-weight:600;color:var(--testo)}
.pb-val{font-family:'JetBrains Mono',monospace;font-size:.78rem;color:var(--cyan)}
.pb-track{height:8px;background:var(--bg3);border-radius:4px;overflow:hidden}
.pb-fill{height:100%;border-radius:4px;width:0;transition:width 1.2s cubic-bezier(.4,0,.2,1)}

/* ‚îÄ‚îÄ TABLE ‚îÄ‚îÄ */
.tbl-wrap{overflow-x:auto;margin-top:4px}
table{width:100%;border-collapse:collapse;font-size:.82rem}
thead tr{border-bottom:2px solid var(--border)}
thead th{padding:12px 14px;text-align:left;font-family:'JetBrains Mono',monospace;font-size:.68rem;letter-spacing:.12em;text-transform:uppercase;color:var(--cyan);font-weight:600;white-space:nowrap}
tbody tr{border-bottom:1px solid rgba(0,200,255,.06);transition:background .15s}
tbody tr:hover{background:rgba(0,229,255,.04)}
tbody td{padding:10px 14px;color:var(--testo);vertical-align:middle}
.mono{font-family:'JetBrains Mono',monospace;font-size:.76rem}
.badge{display:inline-block;padding:2px 10px;border-radius:2px;font-family:'JetBrains Mono',monospace;font-size:.68rem;font-weight:600;letter-spacing:.06em;border:1px solid}
.b-ok{color:var(--verde);border-color:rgba(6,214,160,.3);background:rgba(6,214,160,.08)}
.b-par{color:var(--gold);border-color:rgba(255,209,102,.3);background:rgba(255,209,102,.08)}
.b-no{color:var(--rosso);border-color:rgba(239,71,111,.3);background:rgba(239,71,111,.08)}
.b-zero{color:var(--testo2);border-color:rgba(200,216,240,.15);background:transparent}
.prog-cell{display:flex;align-items:center;gap:8px}
.prog-mini{flex:1;height:5px;background:var(--bg3);border-radius:3px;overflow:hidden;min-width:50px}
.prog-mini-fill{height:100%;border-radius:3px;background:var(--verde)}
.prog-num{font-family:'JetBrains Mono',monospace;font-size:.74rem;color:#fff;white-space:nowrap}

/* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
footer{position:relative;z-index:2;border-top:1px solid var(--border);padding:24px 60px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;font-family:'JetBrains Mono',monospace;font-size:.7rem;color:var(--testo2)}
.logo-f{color:var(--cyan);font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:.1em}
.star-row{color:var(--gold);letter-spacing:3px;font-size:.85rem}

/* ‚îÄ‚îÄ CSS 3D BAR CHART ‚îÄ‚îÄ */
.bar3d-scene{
  perspective:900px;
  padding:32px 24px 48px;
  overflow:hidden;
}
.bar3d-stage{
  display:flex;
  align-items:flex-end;
  gap:14px;
  height:320px;
  transform:rotateX(12deg) rotateY(-6deg);
  transform-style:preserve-3d;
  padding-bottom:0;
}
.bar3d-col{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:0;
  flex:1;
  min-width:0;
  transform-style:preserve-3d;
}
.bar3d-bar-wrap{
  position:relative;
  width:100%;
  transform-style:preserve-3d;
  cursor:pointer;
  transition:filter .2s;
}
.bar3d-bar-wrap:hover{filter:brightness(1.25) drop-shadow(0 0 12px currentColor)}
/* front face */
.bar3d-front{
  width:100%;
  border-radius:3px 3px 0 0;
  position:relative;
  transition:height .9s cubic-bezier(.4,0,.2,1);
}
/* top face */
.bar3d-top{
  position:absolute;
  top:0;left:0;right:0;
  height:12px;
  border-radius:3px 3px 0 0;
  transform:rotateX(-90deg);
  transform-origin:top center;
}
/* right face */
.bar3d-right{
  position:absolute;
  top:0;right:-10px;
  width:10px;
  height:100%;
  transform:rotateY(90deg);
  transform-origin:left center;
  border-radius:0 3px 3px 0;
}
.bar3d-label{
  margin-top:10px;
  font-family:'JetBrains Mono',monospace;
  font-size:.6rem;
  color:rgba(200,216,240,.5);
  text-align:center;
  line-height:1.3;
  letter-spacing:.03em;
  word-break:break-word;
  max-width:100%;
}
.bar3d-val{
  font-family:'Bebas Neue',sans-serif;
  font-size:1.1rem;
  margin-bottom:4px;
  text-align:center;
}
/* tooltip */
.bar3d-tip{
  position:fixed;z-index:999;
  background:rgba(6,13,26,.95);
  border:1px solid rgba(0,229,255,.25);
  color:#fff;
  font-family:'JetBrains Mono',monospace;
  font-size:.78rem;
  padding:10px 14px;
  border-radius:3px;
  pointer-events:none;
  opacity:0;
  transition:opacity .15s;
  white-space:nowrap;
  box-shadow:0 4px 24px rgba(0,0,0,.6);
}
.bar3d-x-axis{
  display:flex;
  gap:14px;
  padding:0 24px 0;
  border-top:1px solid rgba(0,200,255,.12);
  margin-top:0;
}

@media(max-width:900px){
  .kpi-grid{grid-template-columns:repeat(2,1fr)}
  .g2,.g13{grid-template-columns:1fr}
  .hero-inner,.hero-bottom,footer{padding-left:24px;padding-right:24px}
  .page{padding:36px 18px 80px}
  .hero-stats-row{gap:24px}
}
@media(max-width:520px){
  .kpi-grid{grid-template-columns:1fr 1fr}
  header h1{font-size:2.4rem}
}
</style>
</head>
<body>

<canvas id="particles"></canvas>

<header>
  <div class="hero-grid"></div>
  <div class="hero-glow"></div>
  <div class="hero-inner">
    <div class="hero-tag"><div class="pulse"></div>LIVE DASHBOARD ¬∑ PNRR FUTURA ¬∑ MIM</div>
    <h1>FUTURA PNRR<br><span class="ac1">GESTIONE</span> <span class="ac2">PROGETTI</span></h1>
    <div class="hero-sub">IIS Mendel &nbsp;¬∑&nbsp; Villa Cortese (MI) &nbsp;¬∑&nbsp; Cod. MIIS08300X &nbsp;¬∑&nbsp; A.S. 2025/26</div>
    <div class="hero-stats-row">
      <div class="h-stat"><div class="h-stat-val"><span class="counter" data-to="74">0</span></div><div class="h-stat-lbl">Partecipanti</div></div>
      <div class="h-div"></div>
      <div class="h-stat"><div class="h-stat-val"><span class="counter" data-to="123">0</span></div><div class="h-stat-lbl">Iscrizioni totali</div></div>
      <div class="h-div"></div>
      <div class="h-stat"><div class="h-stat-val"><span class="counter" data-to="106">0</span></div><div class="h-stat-lbl">Attestati emessi</div></div>
      <div class="h-div"></div>
      <div class="h-stat"><div class="h-stat-val"><span class="counter" data-to="86">0</span><span class="u">%</span></div><div class="h-stat-lbl">Tasso completamento</div></div>
    </div>
  </div>
  <div class="hero-bottom">
    <span>MIIS08300X</span><span class="sep">¬∑</span>
    <span>MISSIONE 4 ¬∑ ISTRUZIONE E RICERCA</span><span class="sep">¬∑</span>
    <span>NEXTGENERATIONEU</span>
    <span style="margin-left:auto">A.S. 2025/26</span>
  </div>
</header>

<div class="page">

  <!-- KPI -->
  <div class="kpi-grid">
    <div class="kpi" data-d="0"><div class="kpi-ico">üë•</div><div class="kpi-val"><span class="counter" data-to="74">0</span></div><div class="kpi-lbl">Partecipanti</div><div class="kpi-note">Personale scolastico</div></div>
    <div class="kpi gold" data-d="100"><div class="kpi-ico">üìã</div><div class="kpi-val"><span class="counter" data-to="123">0</span></div><div class="kpi-lbl">Iscrizioni totali</div><div class="kpi-note">Edizioni associate</div></div>
    <div class="kpi verde" data-d="200"><div class="kpi-ico">üèÖ</div><div class="kpi-val"><span class="counter" data-to="106">0</span></div><div class="kpi-lbl">Attestati emessi</div><div class="kpi-note">Su 123 frequentate</div></div>
    <div class="kpi" data-d="300"><div class="kpi-ico">üéØ</div><div class="kpi-val"><span class="counter" data-to="86">0</span><span class="u">%</span></div><div class="kpi-lbl">Completamento</div><div class="kpi-note">60/74 percorsi completi</div></div>
  </div>

  <!-- ¬ß 01 ‚Äî CORSI 3D -->
  <div class="sec">
    <div class="sec-hd"><span class="sec-num">01</span><h2 class="sec-title">Partecipazione per corso ‚Äî Vista 3D</h2><div class="sec-line"></div></div>
    <div class="card">
      <div class="card-ttl">Iscritti per edizione formativa</div>
      <div class="card-sub">Tutti i corsi e laboratori FUTURA PNRR ‚Äî hover per dettaglio</div>
      <div id="bar3d-css"></div>
    </div>
  </div>

  <!-- ¬ß 02 ‚Äî ATTESTATI -->
  <div class="sec">
    <div class="sec-hd"><span class="sec-num">02</span><h2 class="sec-title">Attestati e completamento</h2><div class="sec-line"></div></div>
    <div class="g13">
      <div class="card" style="display:flex;flex-direction:column;justify-content:center;align-items:center">
        <div class="card-ttl" style="text-align:center">Tasso completamento</div>
        <div class="card-sub" style="text-align:center;margin-bottom:8px">Percorsi con tutti gli attestati</div>
        <div class="gauge-wrap">
          <div class="gauge-ring">
            <svg viewBox="0 0 180 180" width="180" height="180">
              <circle class="track" cx="90" cy="90" r="80"/>
              <circle class="fill" id="gfill" cx="90" cy="90" r="80" stroke="url(#gCyan)"/>
              <defs><linearGradient id="gCyan" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#00E5FF"/><stop offset="100%" stop-color="#06D6A0"/></linearGradient></defs>
            </svg>
            <div class="gauge-label"><div class="gauge-big">81%</div><div class="gauge-sm">completato</div></div>
          </div>
          <div style="width:100%;padding:0 8px">
            <div class="pb-item"><div class="pb-header"><span class="pb-name">Completo (60)</span><span class="pb-val" style="color:var(--verde)">81%</span></div><div class="pb-track"><div class="pb-fill" data-w="81" style="background:var(--verde)"></div></div></div>
            <div class="pb-item"><div class="pb-header"><span class="pb-name">Parziale (5)</span><span class="pb-val" style="color:var(--gold)">7%</span></div><div class="pb-track"><div class="pb-fill" data-w="7" style="background:var(--gold)"></div></div></div>
            <div class="pb-item"><div class="pb-header"><span class="pb-name">Senza attestato (8)</span><span class="pb-val" style="color:var(--rosso)">11%</span></div><div class="pb-track"><div class="pb-fill" data-w="11" style="background:var(--rosso)"></div></div></div>
            <div class="pb-item" style="margin-bottom:0"><div class="pb-header"><span class="pb-name">Non iscritto (1)</span><span class="pb-val" style="color:var(--testo2)">1%</span></div><div class="pb-track"><div class="pb-fill" data-w="1" style="background:var(--testo2)"></div></div></div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-ttl">Distribuzione attestati per partecipante ‚Äî 3D</div>
        <div class="card-sub">Quanti attestati ha ottenuto ciascun gruppo di partecipanti</div>
        <div class="ch" id="pie3d" style="height:380px"></div>
      </div>
    </div>

    <div class="card">
      <div class="card-ttl">Edizioni associate vs Attestati ottenuti ‚Äî Confronto</div>
      <div class="card-sub">Confronto per fasce di partecipazione ¬∑ Hover sulle barre per dettaglio</div>
      <div class="ch" id="grouped3d" style="height:400px"></div>
    </div>
  </div>

  <!-- ¬ß 03 ‚Äî ANALISI -->
  <div class="sec">
    <div class="sec-hd"><span class="sec-num">03</span><h2 class="sec-title">Analisi avanzata</h2><div class="sec-line"></div></div>
    <div class="g2">
      <div class="card"><div class="card-ttl">Radar ‚Äî Corsi teorici principali</div><div class="card-sub">Iscritti nei 4 corsi FUTURA principali</div><div class="ch" id="radar" style="height:320px"></div></div>
      <div class="card"><div class="card-ttl">Funnel ‚Äî Laboratori pratici</div><div class="card-sub">In ordine decrescente di adesione</div><div class="ch" id="funnel" style="height:320px"></div></div>
    </div>
    <div class="card">
      <div class="card-ttl">Treemap ‚Äî Peso relativo di tutti i corsi</div>
      <div class="card-sub">Dimensione proporzionale al numero di iscritti per ciascuna edizione</div>
      <div class="ch" id="treemap" style="height:320px"></div>
    </div>
  </div>

  <!-- ¬ß 04 ‚Äî TABELLA -->
  <div class="sec">
    <div class="sec-hd"><span class="sec-num">04</span><h2 class="sec-title">Registro partecipanti</h2><div class="sec-line"></div></div>
    <div class="card" style="padding-bottom:8px">
      <div class="card-ttl">Elenco completo ‚Äî 74 unit√† di personale</div>
      <div class="card-sub">IIS Mendel ¬∑ Villa Cortese (MI) ¬∑ MIIS08300X ¬∑ A.S. 2025/26</div>
      <div class="tbl-wrap">
        <table>
          <thead><tr><th>#</th><th>Cognome</th><th>Nome</th><th>Cod. Identificativo</th><th>Tipo</th><th>Edizioni</th><th>Attestati</th><th>Stato</th></tr></thead>
          <tbody id="tBody"></tbody>
        </table>
      </div>
    </div>
  </div>

</div>

<footer>
  <div><div class="logo-f">FUTURA PNRR</div><div style="margin-top:2px">IIS Mendel ¬∑ Villa Cortese (MI) ¬∑ MIIS08300X</div></div>
  <div style="text-align:center"><div class="star-row">‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ</div><div style="margin-top:4px">Finanziato dall'Unione Europea ¬∑ NextGenerationEU</div></div>
  <div style="text-align:right"><div>Missione 4 ¬∑ Istruzione e Ricerca</div><div style="margin-top:2px;color:var(--cyan)">A.S. 2025/26</div></div>
</footer>

<script>
/* DATA */
const P=[
  ["BOCCIA","MICHELE","E948483600",1,0],["BALLERINI","ALESSIA","4339BF1B00",1,1],
  ["BONFIGLIO","GIUSEPPA G.","3AF8930C00",2,2],["BELOTTI","CAMILLA","73ECA21700",1,1],
  ["BONA","ANTONELLA","DB8C4F3700",2,2],["BOTTANI","ANGELA","AB0D2B4E00",2,2],
  ["CALABRIA","MARIALAURA","0DACF41B00",2,0],["CLEMENTI","CINZIA","C5CC8C4700",3,3],
  ["CERETTI","ANGELA","65E3EE3700",2,2],["CALATI","LUCIA","EBB67C5600",3,3],
  ["CORDO'","PATRIZIA","65DAB75700",3,3],["CAPOZZI","CLAUDIA","8E43FBB200",1,1],
  ["CASSARA'","AGOSTINA","6FE0D05E00",3,3],["CRIVELLARO","MARA","DEED5F4700",2,0],
  ["DI SALVO","ROSSANA","8F92C32200",1,1],["DI RIENZO","SILVIA","5CC17F3300",2,2],
  ["DE BERNARDIS","GIANCARLO","C6C1FF2100",2,2],["DE GIORGI","MARILENA","CE1FEA2300",3,2],
  ["ESPOSITO","MARIAGRAZIA","E0B10C0900",2,2],["FINI","ROSSANA","6E95F86800",1,1],
  ["FITTIPALDI","STEFANIA","FA2E3F0400",1,0],["FERRANTELLI","CALOGERO","EF697C1900",3,2],
  ["FRANCHETTI","STEFANIA","EB248E5600",2,2],["GERACI","ELISA","E28AFD1F00",2,2],
  ["GIANNOPOLO","CLARA","62F3CA5700",1,1],["GIARRATANA","CINZIA","BDB5B76400",2,2],
  ["GRECO","TIZIANA","8893F81100",1,1],["GURRIERI","DARIO","F5F3CC5700",2,2],
  ["LIBRIZZI","SALVATORE","B39F1C7600",2,0],["LUONI","SARA","F5B1AA4100",1,1],
  ["LOPES DE SOUSA","DANIELA","64B95D4100",2,2],["LANZA","LUCIA","7E33F75C00",1,1],
  ["LO IACONO","ANTONELLA","B7B64E7E00",2,2],["MERLINO","ROBERTA","F73B1C4700",3,3],
  ["MAZZOLA","MARIA","72839F5D00",2,2],["MEGNA","CINZIA","72A1AE4400",1,1],
  ["MELONE","PASQUALE","EDFF8C6700",2,2],["MORDENTE","LORETA","A4CA584300",1,1],
  ["NICOSIA","LUIGI","69EA4D2300",2,2],["NICOLOSI","MIRIAM","6E47384300",1,1],
  ["PACE","GIANCARLO","6E04AA4500",1,1],["PALMIERI","LUCA","12E6BDC100",2,2],
  ["PAPOTTO","JESSICA","F42B494300",1,1],["PECORARO","ANTONELLA","95FC084400",1,1],
  ["PELLEGRINO","ANGELA","C3E58F3600",2,2],["PELLEGRINO","GIOVANNA","D71FE26000",2,2],
  ["PERRICONE","FRANCESCA","4D53124700",1,1],["PIAZZA","ILARIA","DD1BCB5200",2,2],
  ["PIROCCHI","STEFANO","B0EBCD1B00",1,1],["RODA'","GRAZIELLA","6C0B3E5000",3,2],
  ["ROMANO","BIAGIO","74A65E4500",2,2],["ROMANO","SEBASTIANO","5D72B55500",2,2],
  ["SACCOMANNO","ANNA","35B8694300",2,2],["SACCOMANNO","EMILIANA","4BE93B4D00",2,2],
  ["SANNINO","LUIGI","B74C0E5900",3,3],["SANNINO","ROSA","D87A2B3000",1,1],
  ["SANFILIPPO","VALERIO","16D94C3B00",1,0],["SASCARO","MASSIMILIANO","26A9B85600",1,0],
  ["SCATURRO","CATERINA","E0D0E04A00",3,3],["SEMERARO","GIOVANNI","5B2A8F3600",1,0],
  ["SPENNATO","ROCCO","6C0B3E5100",2,2],["TORRISI","PATRIZIA","4FBA1B3200",1,1],
  ["TRONCONI","STEFANIA","BCCA3D2800",2,2],["URBANO","TERESA","72DABB4900",2,2],
  ["VENDITTI","ELEONORA","D59EEE3D00",1,1],["VENEZIANO","VALENTINA","B39F1C7700",1,1],
  ["VERNUCCI","ANTONELLO","86B8D19100",0,0],["ZICARI","LINDA C.","48BCE09E00",1,1],
  ["ZANZOTTERA","LUISA","F70E112400",2,2],["ABATE","ASSUNTA","AB0D2B4F00",2,2],
  ["ABBATE","GIUSEPPA","AB0D2B5000",1,1],["AIELLO","TERESA","7E33F75D00",2,2],
  ["ARENA","CARMELA","8893F81200",1,1],
];

/* PARTICLES */
(function(){
  const c=document.getElementById('particles'),ctx=c.getContext('2d');
  let W,H,pts=[];
  function resize(){W=c.width=innerWidth;H=c.height=innerHeight}
  function init(){pts=[];for(let i=0;i<90;i++)pts.push({x:Math.random()*W,y:Math.random()*H,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,r:Math.random()*1.5+.5})}
  function draw(){
    ctx.clearRect(0,0,W,H);
    pts.forEach(p=>{p.x+=p.vx;p.y+=p.vy;if(p.x<0||p.x>W)p.vx*=-1;if(p.y<0||p.y>H)p.vy*=-1;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fillStyle='rgba(0,229,255,.6)';ctx.fill()});
    for(let i=0;i<pts.length;i++)for(let j=i+1;j<pts.length;j++){const dx=pts[i].x-pts[j].x,dy=pts[i].y-pts[j].y,d=Math.sqrt(dx*dx+dy*dy);if(d<120){ctx.beginPath();ctx.moveTo(pts[i].x,pts[i].y);ctx.lineTo(pts[j].x,pts[j].y);ctx.strokeStyle=`rgba(0,229,255,${(1-d/120)*.12})`;ctx.lineWidth=.6;ctx.stroke()}}
    requestAnimationFrame(draw);
  }
  resize();init();draw();addEventListener('resize',()=>{resize();init()});
})();

/* COUNTERS */
function animC(el,to,delay=0){setTimeout(()=>{let v=0,dur=1400,step=16,inc=to/(dur/step);const t=setInterval(()=>{v=Math.min(v+inc,to);el.textContent=Math.round(v);if(v>=to)clearInterval(t)},step)},delay)}
document.querySelectorAll('.counter').forEach((el,i)=>animC(el,+el.dataset.to,i*120));

/* IO */
const IO=new IntersectionObserver(e=>{e.forEach(x=>{if(x.isIntersecting){const el=x.target,d=+(el.dataset.d||0);setTimeout(()=>el.classList.add('vis'),d);IO.unobserve(el)}})},{threshold:.1});
document.querySelectorAll('.kpi,.card').forEach(el=>IO.observe(el));

/* GAUGE + PROGRESS */
const gIO=new IntersectionObserver(e=>{e.forEach(x=>{if(x.isIntersecting){document.getElementById('gfill').style.strokeDashoffset=502-(502*.81);document.querySelectorAll('.pb-fill').forEach(b=>b.style.width=b.dataset.w+'%');gIO.disconnect()}})},{threshold:.2});
gIO.observe(document.querySelector('.gauge-wrap'));

/* ECHARTS */
const BG='transparent',BORDER='rgba(0,200,255,.13)';
const CYAN='#00E5FF',CYAN2='#00B4D8',GOLD='#FFD166',VERDE='#06D6A0',VERDE2='#00A67E',ROSSO='#EF476F',LILLA='#9B72CF';
const aLabel={color:'rgba(200,216,240,.55)',fontFamily:'JetBrains Mono',fontSize:11};
const aTip={backgroundColor:'rgba(6,13,26,.92)',borderColor:BORDER,textStyle:{color:'#fff',fontFamily:'JetBrains Mono',fontSize:12}};

/* 1 ‚Äî CSS 3D BAR CORSI */
{
  const corsi=[
    {label:"Fond. IA\nInsegnanti",short:"IA Insegnanti",val:30,col:'#00E5FF',dark:'#007A99',top:'#33EEFF'},
    {label:"Cybersicurezza",short:"Cybersicurezza",val:20,col:'#00B4D8',dark:'#005A6B',top:'#33C6E0'},
    {label:"Cittadinanza\nDigitale",short:"Cittadinanza Dig.",val:17,col:'#007BFF',dark:'#003E80',top:'#3395FF'},
    {label:"Nuova\nPassWeb",short:"Nuova PassWeb",val:16,col:'#4BA6DC',dark:'#255370',top:'#6FB8E4'},
    {label:"Lab. Ambienti\nApprendimento",short:"Lab. Ambienti",val:10,col:'#06D6A0',dark:'#036B50',top:'#38DDB4'},
    {label:"Lab.\nGamification",short:"Lab. Gamification",val:10,col:'#00A67E',dark:'#005340',top:'#33B898'},
    {label:"Ultimo Miglio\nFTS",short:"Ultimo Miglio FTS",val:8,col:'#FFD166',dark:'#806830',top:'#FFDA85'},
    {label:"Ultimo Miglio\nATA",short:"Ultimo Miglio ATA",val:8,col:'#F0A500',dark:'#785200',top:'#F3B833'},
    {label:"Strumenti\nInclusione",short:"Strumenti Inclusione",val:7,col:'#9B72CF',dark:'#4D3967',top:'#B08FD9'},
    {label:"Storytelling\nPodcast",short:"Storytelling",val:7,col:'#7B4FAD',dark:'#3D2756',top:'#9572C0'},
    {label:"Emergenze\nCyber",short:"Emergenze Cyber",val:6,col:'#EF476F',dark:'#771F37',top:'#F26B8A'},
  ];
  const maxVal=30;
  const tip=document.createElement('div');
  tip.className='bar3d-tip';
  document.body.appendChild(tip);

  const scene=document.createElement('div');
  scene.className='bar3d-scene';
  const stage=document.createElement('div');
  stage.className='bar3d-stage';

  corsi.forEach(c=>{
    const hPct=(c.val/maxVal)*100;
    const hPx=Math.round((c.val/maxVal)*280);

    const col=document.createElement('div');
    col.className='bar3d-col';

    const valEl=document.createElement('div');
    valEl.className='bar3d-val';
    valEl.style.color=c.col;
    valEl.style.opacity='0';
    valEl.textContent=c.val;

    const wrap=document.createElement('div');
    wrap.className='bar3d-bar-wrap';
    wrap.style.color=c.col;
    wrap.style.height=hPx+'px';

    const front=document.createElement('div');
    front.className='bar3d-front';
    front.style.cssText=`height:${hPx}px;background:linear-gradient(180deg,${c.col} 0%,${c.dark} 100%);box-shadow:0 0 18px ${c.col}44,inset 0 1px 0 ${c.top}66`;

    const topF=document.createElement('div');
    topF.className='bar3d-top';
    topF.style.background=c.top;

    const right=document.createElement('div');
    right.className='bar3d-right';
    right.style.background=c.dark;

    front.appendChild(topF);
    front.appendChild(right);
    wrap.appendChild(front);

    const lbl=document.createElement('div');
    lbl.className='bar3d-label';
    lbl.textContent=c.label;

    col.appendChild(valEl);
    col.appendChild(wrap);
    col.appendChild(lbl);
    stage.appendChild(col);

    // tooltip + hover
    wrap.addEventListener('mouseenter',e=>{
      tip.innerHTML=`<span style="color:${c.col}">‚ñÆ</span> <b>${c.short}</b><br/>Iscritti: <b style="color:${c.col}">${c.val}</b>`;
      tip.style.opacity='1';
    });
    wrap.addEventListener('mousemove',e=>{
      tip.style.left=(e.clientX+16)+'px';
      tip.style.top=(e.clientY-10)+'px';
    });
    wrap.addEventListener('mouseleave',()=>tip.style.opacity='0');
  });

  scene.appendChild(stage);
  document.getElementById('bar3d-css').appendChild(scene);

  // animate in
  const barIO=new IntersectionObserver(entries=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        const fronts=stage.querySelectorAll('.bar3d-front');
        const vals=stage.querySelectorAll('.bar3d-val');
        fronts.forEach((f,i)=>{
          const orig=f.style.height;
          f.style.height='0px';
          setTimeout(()=>{f.style.height=orig;f.style.transition='height .8s cubic-bezier(.4,0,.2,1)'},i*55+200);
        });
        vals.forEach((v,i)=>setTimeout(()=>{v.style.opacity='1';v.style.transition='opacity .4s'},i*55+700));
        barIO.disconnect();
      }
    });
  },{threshold:.1});
  barIO.observe(scene);
}

/* 3 ‚Äî GROUPED BAR CONFRONTO */
{
  const ch=echarts.init(document.getElementById('grouped3d'));
  const cats=['0 edizioni','1 edizione','2 edizioni','3 edizioni'];
  const ediz=[1,33,30,10],att=[9,31,27,7];
  const CYAN='#00E5FF',VERDE='#06D6A0',BG2='#0C1A30',BORDER='rgba(0,200,255,.13)';
  const mono={fontFamily:'JetBrains Mono',fontSize:11};

  ch.setOption({
    backgroundColor:'transparent',
    tooltip:{
      trigger:'axis',axisPointer:{type:'shadow'},
      backgroundColor:'rgba(6,13,26,.92)',
      borderColor:BORDER,
      textStyle:{color:'#fff',fontFamily:'JetBrains Mono',fontSize:12},
      formatter:params=>{
        const cat=params[0].axisValueLabel;
        return `<b>${cat}</b><br/>`+params.map(p=>`<span style="color:${p.color}">‚ñÆ</span> ${p.seriesName}: <b>${p.value}</b>`).join('<br/>');
      }
    },
    legend:{
      data:['Edizioni associate','Attestati ottenuti'],
      top:8,right:16,
      textStyle:{color:'rgba(200,216,240,.65)',...mono}
    },
    grid:{left:16,right:16,bottom:40,top:52,containLabel:true},
    xAxis:{
      type:'category',data:cats,
      axisLabel:{color:'rgba(200,216,240,.6)',...mono},
      axisLine:{lineStyle:{color:BORDER}},
      axisTick:{lineStyle:{color:BORDER}}
    },
    yAxis:{
      type:'value',name:'Partecipanti',
      nameTextStyle:{color:'rgba(200,216,240,.4)',...mono},
      axisLabel:{color:'rgba(200,216,240,.5)',...mono},
      axisLine:{show:false},
      splitLine:{lineStyle:{color:'rgba(0,200,255,.07)',type:'dashed'}}
    },
    series:[
      {
        name:'Edizioni associate',type:'bar',data:ediz,barMaxWidth:52,barGap:'20%',
        itemStyle:{
          color:{type:'linear',x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:'#33EEFF'},{offset:1,color:CYAN+'88'}]},
          borderRadius:[4,4,0,0],
          shadowBlur:12,shadowColor:CYAN+'55'
        },
        emphasis:{itemStyle:{shadowBlur:22,shadowColor:CYAN+'88'}},
        label:{show:true,position:'top',color:CYAN,...mono,fontSize:12,fontWeight:'bold'}
      },
      {
        name:'Attestati ottenuti',type:'bar',data:att,barMaxWidth:52,
        itemStyle:{
          color:{type:'linear',x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:'#38DDB4'},{offset:1,color:VERDE+'88'}]},
          borderRadius:[4,4,0,0],
          shadowBlur:12,shadowColor:VERDE+'55'
        },
        emphasis:{itemStyle:{shadowBlur:22,shadowColor:VERDE+'88'}},
        label:{show:true,position:'top',color:VERDE,...mono,fontSize:12,fontWeight:'bold'}
      }
    ]
  });
  window.addEventListener('resize',()=>ch.resize());
}

/* 2 ‚Äî PIE 3D */
{
  const ch=echarts.init(document.getElementById('pie3d'));
  ch.setOption({
    backgroundColor:BG,tooltip:{...aTip,formatter:'{b}: <b>{c}</b> pers. ({d}%)'},
    legend:{bottom:8,left:'center',textStyle:{color:'rgba(200,216,240,.6)',fontFamily:'JetBrains Mono',fontSize:10},icon:'circle',itemWidth:8,itemHeight:8},
    series:[{
      type:'pie',radius:['38%','72%'],center:['50%','46%'],avoidLabelOverlap:true,padAngle:4,
      itemStyle:{borderRadius:8,borderColor:'rgba(6,13,26,.9)',borderWidth:3,shadowBlur:22,shadowColor:'rgba(0,0,0,.6)'},
      label:{show:true,formatter:'{b}\n{c} pers.',color:'rgba(200,216,240,.75)',fontFamily:'JetBrains Mono',fontSize:10,lineHeight:14},
      emphasis:{itemStyle:{shadowBlur:30,shadowColor:'rgba(0,229,255,.4)'},scale:true,scaleSize:8},
      animationType:'expansion',animationDuration:1400,
      data:[
        {value:9, name:'0 attestati', itemStyle:{color:ROSSO}},
        {value:31,name:'1 attestato', itemStyle:{color:GOLD}},
        {value:27,name:'2 attestati', itemStyle:{color:VERDE}},
        {value:7, name:'3 attestati', itemStyle:{color:CYAN}},
      ]
    }]
  });
  window.addEventListener('resize',()=>ch.resize());
}

/* 4 ‚Äî RADAR */
{
  const ch=echarts.init(document.getElementById('radar'));
  ch.setOption({
    backgroundColor:BG,tooltip:{...aTip},
    radar:{center:['50%','50%'],radius:'66%',nameGap:10,splitNumber:4,axisName:{color:'rgba(200,216,240,.65)',fontFamily:'JetBrains Mono',fontSize:10},splitArea:{areaStyle:{color:['rgba(0,229,255,.03)','rgba(0,229,255,.07)']}},splitLine:{lineStyle:{color:'rgba(0,200,255,.12)'}},axisLine:{lineStyle:{color:'rgba(0,200,255,.18)'}},indicator:[{name:"IA per\nInsegnanti",max:34},{name:"Cybersicurezza",max:34},{name:"Cittadinanza\nDigitale",max:34},{name:"Nuova\nPassWeb",max:34}]},
    series:[{type:'radar',data:[{value:[30,20,17,16],name:'Iscritti',areaStyle:{color:'rgba(0,229,255,.12)'},lineStyle:{color:CYAN,width:2},itemStyle:{color:CYAN,borderColor:'rgba(6,13,26,.8)',borderWidth:2},symbol:'circle',symbolSize:8}]}]
  });
  window.addEventListener('resize',()=>ch.resize());
}

/* 5 ‚Äî FUNNEL */
{
  const ch=echarts.init(document.getElementById('funnel'));
  const pal=[CYAN,CYAN2,'#007BFF',VERDE,VERDE2,GOLD,LILLA];
  ch.setOption({
    backgroundColor:BG,tooltip:{...aTip,formatter:'{b}: <b>{c}</b> iscritti'},
    series:[{type:'funnel',left:'5%',right:'5%',top:'4%',bottom:'4%',width:'90%',sort:'descending',gap:3,label:{show:true,position:'inside',formatter:'{b}\n{c}',fontFamily:'JetBrains Mono',fontSize:10,color:'rgba(6,13,26,.9)',fontWeight:'bold'},labelLine:{show:false},itemStyle:{borderColor:'transparent',borderWidth:0},emphasis:{itemStyle:{shadowBlur:20,shadowColor:'rgba(0,229,255,.4)'}},
    data:[{value:10,name:'Ambienti Apprendimento'},{value:10,name:'Gamification'},{value:8,name:'Ultimo Miglio FTS'},{value:8,name:'Ultimo Miglio ATA'},{value:7,name:'Strumenti Inclusione'},{value:7,name:'Storytelling Podcast'},{value:6,name:'Emergenze Cyber'}].map((l,i)=>({...l,itemStyle:{color:pal[i]}}))}]
  });
  window.addEventListener('resize',()=>ch.resize());
}

/* 6 ‚Äî TREEMAP */
{
  const ch=echarts.init(document.getElementById('treemap'));
  ch.setOption({
    backgroundColor:BG,tooltip:{...aTip,formatter:'{b}: <b>{c}</b> partecipanti'},
    series:[{type:'treemap',left:0,right:0,top:0,bottom:0,roam:false,nodeClick:false,breadcrumb:{show:false},label:{show:true,formatter:'{b}\n{c}',fontFamily:'JetBrains Mono',fontSize:11,color:'rgba(6,13,26,.9)',fontWeight:'bold'},itemStyle:{borderColor:'rgba(6,13,26,.9)',borderWidth:3,gapWidth:3},emphasis:{disabled:false,itemStyle:{shadowBlur:20,shadowColor:'rgba(0,0,0,.5)'}},levels:[{itemStyle:{borderWidth:2,gapWidth:4,borderColor:'rgba(6,13,26,.9)'}}],
    data:[
      {value:30,name:"Fond. IA\nInsegnanti",itemStyle:{color:CYAN}},
      {value:20,name:"Cybersicurezza",itemStyle:{color:CYAN2}},
      {value:17,name:"Cittadinanza\nDigitale",itemStyle:{color:'#007BFF'}},
      {value:16,name:"Nuova PassWeb",itemStyle:{color:'#4BA6DC'}},
      {value:10,name:"Lab. Ambienti\nApprendimento",itemStyle:{color:VERDE}},
      {value:10,name:"Lab.\nGamification",itemStyle:{color:VERDE2}},
      {value:8,name:"Ultimo Miglio\nFTS",itemStyle:{color:GOLD}},
      {value:8,name:"Ultimo Miglio\nATA",itemStyle:{color:'#F0A500'}},
      {value:7,name:"Strumenti\nInclusione",itemStyle:{color:LILLA}},
      {value:7,name:"Storytelling\nPodcast",itemStyle:{color:'#7B4FAD'}},
      {value:6,name:"Emergenze\nCyber",itemStyle:{color:ROSSO}},
    ]}]
  });
  window.addEventListener('resize',()=>ch.resize());
}

/* TABLE */
const tbody=document.getElementById('tBody');
P.forEach(([cog,nom,id,ed,att],i)=>{
  const pct=ed===0?0:Math.round(att/ed*100);
  let badge,bClass;
  if(ed===0){badge='Non iscritto';bClass='b-zero';}
  else if(att===0){badge='No attestati';bClass='b-no';}
  else if(att<ed){badge='Parziale';bClass='b-par';}
  else{badge='Completo';bClass='b-ok';}
  tbody.innerHTML+=`<tr><td class="mono" style="color:rgba(200,216,240,.35)">${String(i+1).padStart(2,'0')}</td><td style="font-weight:700">${cog}</td><td>${nom}</td><td class="mono" style="font-size:.75rem">${id}</td><td style="color:var(--testo2);font-size:.78rem">Pers. scolastico</td><td class="mono" style="text-align:center">${ed}</td><td><div class="prog-cell"><div class="prog-mini"><div class="prog-mini-fill" style="width:${pct}%"></div></div><span class="prog-num">${att}/${ed}</span></div></td><td><span class="badge ${bClass}">${badge}</span></td></tr>`;
});
</script>
</body>
</html>
